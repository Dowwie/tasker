{
  "id": "T027",
  "name": "Shim scripts for backward compatibility",
  "phase": 4,
  "context": {
    "domain": "Compatibility Layer",
    "capability": "Shim Scripts",
    "spec_ref": {
      "quote": "Skills MUST work without modification via shim scripts",
      "location": "INV-006"
    },
    "steel_thread": false
  },
  "behaviors": ["B72", "B73", "B74"],
  "files": [
    {
      "path": "go/internal/shim/shim.go",
      "action": "create",
      "purpose": "TranslateArgs, ExecBinary, HandleError for shim logic"
    },
    {
      "path": "go/internal/shim/shim_test.go",
      "action": "create",
      "purpose": "Unit tests for shim logic"
    },
    {
      "path": "scripts/state.py",
      "action": "modify",
      "purpose": "Shim script to forward to tasker state"
    },
    {
      "path": "scripts/validate.py",
      "action": "modify",
      "purpose": "Shim script to forward to tasker validate"
    },
    {
      "path": "scripts/bundle.py",
      "action": "modify",
      "purpose": "Shim script to forward to tasker bundle"
    }
  ],
  "dependencies": {
    "tasks": ["T001", "T002", "T007", "T016"],
    "external": []
  },
  "acceptance_criteria": [
    {
      "criterion": "TranslateArgs converts Python script args to Go subcommand format",
      "verification": "go test ./go/internal/shim/... -run TestTranslateArgs -v"
    },
    {
      "criterion": "ExecBinary executes Go binary with translated arguments",
      "verification": "go test ./go/internal/shim/... -run TestExecBinary -v"
    },
    {
      "criterion": "HandleError reports clear error if Go binary not found",
      "verification": "go test ./go/internal/shim/... -run TestHandleError -v"
    },
    {
      "criterion": "Shim scripts work identically to original Python scripts",
      "verification": "bash -c 'python3 scripts/state.py status && tasker state status'"
    }
  ],
  "constraints": ["INV-005: No Python runtime dependency after Go migration complete", "INV-006: Skills MUST work without modification via shim scripts"],
  "estimate_hours": 4
}
