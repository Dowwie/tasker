{
  "id": "T006",
  "name": "Cross-cutting concerns: logging, errors, config, schema validation",
  "phase": 1,
  "context": {
    "domain": "State Management",
    "capability": "State File Operations",
    "spec_ref": {
      "quote": "Schema validation MUST use same JSON Schema files as Python",
      "location": "INV-009"
    },
    "steel_thread": false
  },
  "behaviors": [],
  "files": [
    {
      "path": "go/internal/logging/logger.go",
      "action": "create",
      "purpose": "Structured logger setup with log levels"
    },
    {
      "path": "go/internal/errors/errors.go",
      "action": "create",
      "purpose": "Centralized error types and handling"
    },
    {
      "path": "go/internal/config/config.go",
      "action": "create",
      "purpose": "Configuration management"
    },
    {
      "path": "go/internal/schema/validator.go",
      "action": "create",
      "purpose": "JSON schema validation using santhosh-tekuri/jsonschema"
    }
  ],
  "dependencies": {
    "tasks": ["T001"],
    "external": []
  },
  "acceptance_criteria": [
    {
      "criterion": "Logger outputs to stderr with configurable log levels",
      "verification": "go test ./go/internal/logging/... -run TestLogger -v"
    },
    {
      "criterion": "Error types provide parseable stderr messages for agents",
      "verification": "go test ./go/internal/errors/... -run TestErrors -v"
    },
    {
      "criterion": "Config loads from environment and defaults correctly",
      "verification": "go test ./go/internal/config/... -run TestConfig -v"
    },
    {
      "criterion": "Schema validator uses same JSON Schema files as Python version",
      "verification": "go test ./go/internal/schema/... -run TestValidator -v"
    }
  ],
  "constraints": ["INV-003: Stderr error messages MUST be parseable by calling agents", "INV-008: Log output MUST NOT interfere with stdout data", "INV-009: Schema validation MUST use same JSON Schema files as Python"],
  "estimate_hours": 3
}
