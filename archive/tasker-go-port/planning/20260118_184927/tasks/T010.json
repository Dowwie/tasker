{
  "id": "T010",
  "name": "FSM compiler",
  "phase": 2,
  "context": {
    "domain": "FSM Tools",
    "capability": "FSM Compilation",
    "spec_ref": {
      "quote": "fsm-compiler.py - Compile FSM from spec or capability map",
      "location": "fsm-compiler.py docstring"
    },
    "steel_thread": false
  },
  "behaviors": ["B35", "B36", "B37", "B38"],
  "files": [
    {
      "path": "go/internal/fsm/compiler.go",
      "action": "create",
      "purpose": "CompileFromSpec, CompileFromCapabilityMap, WriteStates, WriteTransitions"
    },
    {
      "path": "go/internal/fsm/compiler_test.go",
      "action": "create",
      "purpose": "Unit tests for FSM compiler"
    },
    {
      "path": "go/internal/command/fsm/fsm.go",
      "action": "create",
      "purpose": "FSM subcommands (compile, mermaid, validate)"
    }
  ],
  "dependencies": {
    "tasks": ["T006"],
    "external": []
  },
  "acceptance_criteria": [
    {
      "criterion": "CompileFromSpec extracts states and transitions from spec JSON",
      "verification": "go test ./go/internal/fsm/... -run TestCompileFromSpec -v"
    },
    {
      "criterion": "CompileFromCapabilityMap generates FSM from capability map behaviors",
      "verification": "go test ./go/internal/fsm/... -run TestCompileFromCapabilityMap -v"
    },
    {
      "criterion": "WriteStates outputs states.json in correct format",
      "verification": "go test ./go/internal/fsm/... -run TestWriteStates -v"
    },
    {
      "criterion": "WriteTransitions outputs transitions.json in correct format",
      "verification": "go test ./go/internal/fsm/... -run TestWriteTransitions -v"
    }
  ],
  "constraints": ["INV-001: JSON file formats MUST remain byte-compatible with Python version"],
  "estimate_hours": 4
}
