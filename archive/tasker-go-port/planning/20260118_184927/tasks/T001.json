{
  "id": "T001",
  "name": "Go module setup and core state types",
  "phase": 0,
  "context": {
    "domain": "State Management",
    "capability": "State File Operations",
    "spec_ref": {
      "quote": "Port scripts/*.py to unified Go CLI with same JSON file formats",
      "location": "Scope section"
    },
    "steel_thread": true
  },
  "behaviors": ["B1", "B2", "B3"],
  "files": [
    {
      "path": "go/go.mod",
      "action": "create",
      "purpose": "Go module definition with cobra, bubbletea, lipgloss, jsonschema dependencies"
    },
    {
      "path": "go/cmd/tasker/main.go",
      "action": "create",
      "purpose": "Entry point with cobra root command"
    },
    {
      "path": "go/internal/state/state.go",
      "action": "create",
      "purpose": "State types, LoadState and SaveState with file locking, ValidateState"
    },
    {
      "path": "go/internal/state/lock.go",
      "action": "create",
      "purpose": "File locking using flock for state file operations"
    },
    {
      "path": "go/internal/state/state_test.go",
      "action": "create",
      "purpose": "Unit tests for state operations"
    }
  ],
  "dependencies": {
    "tasks": [],
    "external": ["Go 1.21+ installed"]
  },
  "acceptance_criteria": [
    {
      "criterion": "Go module initializes and builds without errors",
      "verification": "go build ./go/..."
    },
    {
      "criterion": "LoadState reads state.json and returns parsed State struct",
      "verification": "go test ./go/internal/state/... -run TestLoadState -v"
    },
    {
      "criterion": "SaveState writes state.json with file locking",
      "verification": "go test ./go/internal/state/... -run TestSaveState -v"
    },
    {
      "criterion": "ValidateState validates state against JSON schema",
      "verification": "go test ./go/internal/state/... -run TestValidateState -v"
    }
  ],
  "constraints": ["INV-001: JSON formats must remain byte-compatible with Python version", "INV-004: File locking MUST be used for all state file writes"],
  "estimate_hours": 4,
  "state_machine": {
    "transitions_covered": ["TR1"],
    "guards_enforced": ["I1", "I3"],
    "states_reached": ["S2"]
  }
}
